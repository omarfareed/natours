parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"odIX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showAlert=exports.hideAlert=void 0;var e=function(){var e=document.querySelector(".alert");e&&e.remove()};exports.hideAlert=e;var t=function(t,r){e();var o='<div class="alert alert--'.concat(t,'">').concat(r,"</div>");document.querySelector("body").insertAdjacentHTML("afterbegin",o),window.setTimeout(e,5e3)};exports.showAlert=t;
},{}],"mnjM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logout=exports.login=void 0;var e=require("./alerts.js");function t(e,t,r,n,o,s,a){try{var u=e[s](a),i=u.value}catch(c){return void r(c)}u.done?t(i):Promise.resolve(i).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(o,s){var a=e.apply(r,n);function u(e){t(a,o,s,u,i,"next",e)}function i(e){t(a,o,s,u,i,"throw",e)}u(void 0)})}}var n=function(){var t=r(regeneratorRuntime.mark(function t(r,n){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r,n),t.prev=1,t.next=4,axios({method:"POST",url:"/api/v1/users/login",data:{email:r,password:n}});case 4:(o=t.sent).data.status.startsWith("suc")&&((0,e.showAlert)("success","logged in successfully"),window.setTimeout(function(){location.assign("/")},1500)),console.log(o),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),(0,e.showAlert)("error",t.t0);case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e,r){return t.apply(this,arguments)}}();exports.login=n;var o=function(){var t=r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios({method:"GET",url:"/api/v1/users/logout"});case 3:t.sent.data.status.startsWith("suc")&&((0,e.showAlert)("success","logged out successfully"),window.setTimeout(function(){location.reload(!0)},1500)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(0,e.showAlert)("error",t.t0.response.data.message);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}();exports.logout=o;
},{"./alerts.js":"odIX"}],"g63L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.displayMap=void 0;var e=function(e){mapboxgl.accessToken="pk.eyJ1Ijoib21hcmZhcmVlZCIsImEiOiJja3N5ZmN3NzAyajZrMnluMWtsM205ZGM3In0.Q3a4sYSFy2p50nWzReN2xg";var a=new mapboxgl.Map({container:"map",style:"mapbox://styles/omarfareed/cksyk2efp0rf717sdl6sxssfp"}),o=new mapboxgl.LngLatBounds;e.forEach(function(e){var t=document.createElement("div");t.className="marker",new mapboxgl.Marker({element:t,anchor:"bottom"}).setLngLat(e.coordinates).addTo(a),new mapboxgl.Popup({offset:30}).setLngLat(e.coordinates).setHTML("<p>Day ".concat(e.day,": ").concat(e.description," </p>")).addTo(a),o.extend(e.coordinates)}),a.fitBounds(o,{padding:{top:200,left:200,right:200,bottom:200}})};exports.displayMap=e;
},{}],"yPfX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateData=void 0;var e=require("./alerts.js");function t(e,t,r,s,n,a,o){try{var u=e[a](o),c=u.value}catch(i){return void r(i)}u.done?t(c):Promise.resolve(c).then(s,n)}function r(e){return function(){var r=this,s=arguments;return new Promise(function(n,a){var o=e.apply(r,s);function u(e){t(o,n,a,u,c,"next",e)}function c(e){t(o,n,a,u,c,"throw",e)}u(void 0)})}}var s=function(){var t=r(regeneratorRuntime.mark(function t(r,s){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(r),n="/api/v1/users/update".concat("password"===s?"MyPassword":"Me"),t.next=5,axios({method:"PATCH",url:n,data:r});case 5:t.sent.data.status.startsWith("suc")&&(0,e.showAlert)("success","Updated successfully"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.response),(0,e.showAlert)("error",t.t0.response.data.message);case 13:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e,r){return t.apply(this,arguments)}}();exports.updateData=s;
},{"./alerts.js":"odIX"}],"Uj2q":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o,s,c){try{var i=e[s](c),u=i.value}catch(a){return void t(a)}i.done?r(u):Promise.resolve(u).then(n,o)}function r(r){return function(){var t=this,n=arguments;return new Promise(function(o,s){var c=r.apply(t,n);function i(r){e(c,o,s,i,u,"next",r)}function u(r){e(c,o,s,i,u,"throw",r)}i(void 0)})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.bookTour=void 0;var t=Stripe("pk_test_51JYRhODix4r2vkMx3Jp8rrWXaOKpo3K6IBMC6kmKC0zbs3swNbklUrr2cr5BQZd2ElNq7jK2mAln6p8RoFD6pYnP00ZUT67RrP"),n=function(){var e=r(regeneratorRuntime.mark(function e(r){var n,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/v1/bookings/checkout-session/".concat(r),{method:"GET"});case 3:return n=e.sent,e.next=6,n.json();case 6:return o=e.sent,s=o.session.id,e.next=10,t.redirectToCheckout({sessionId:s});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(r){return e.apply(this,arguments)}}();exports.bookTour=n;
},{}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./login.js"),t=require("./mapbox.js"),n=require("./updateData.js"),o=require("./stripe.js");function r(e,t,n,o,r,a,u){try{var d=e[a](u),s=d.value}catch(c){return void n(c)}d.done?t(s):Promise.resolve(s).then(o,r)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(o,a){var u=e.apply(t,n);function d(e){r(u,o,a,d,s,"next",e)}function s(e){r(u,o,a,d,s,"throw",e)}d(void 0)})}}console.log(axios);var u=document.querySelector(".login-form"),d=document.querySelector(".form-user-data"),s=document.querySelector(".form-user-settings"),c=document.querySelector(".nav__el--logout"),l=document.getElementById("book-tour");console.log(u);var i=document.getElementById("map");if(i){var m=JSON.parse(i.dataset.locations);(0,t.displayMap)(m)}u&&(console.log("here"),u.addEventListener("submit",function(t){t.preventDefault();var n=document.getElementById("email").value,o=document.getElementById("password").value;console.log(n,o),(0,e.login)(n,o)})),c&&c.addEventListener("click",e.logout),d&&d.addEventListener("submit",function(e){e.preventDefault();var t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),console.log(t),(0,n.updateData)(t,"data")}),s&&s.addEventListener("submit",function(e){e.preventDefault(),document.querySelector(".btn--save--password").textContent="Updating...";var t=document.getElementById("password-current").value,o=document.getElementById("password-confirm").value,r=document.getElementById("password").value;(0,n.updateData)({password:r,passwordConfirm:o,passwordCurrent:t},"password"),document.getElementById("password-current").value=document.getElementById("password-confirm").value=document.getElementById("password").value="",document.querySelector(".btn--save--password").textContent="Save Password"}),l&&l.addEventListener("click",function(){var e=a(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.dataset.tourId,t.target.textContent="Processing...",e.next=4,(0,o.bookTour)(n);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());
},{"./login.js":"mnjM","./mapbox.js":"g63L","./updateData.js":"yPfX","./stripe.js":"Uj2q"}]},{},["Focm"], null)
//# sourceMappingURL=/bundle.js.map